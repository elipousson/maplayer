<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Use ggforce::geom_mark_rect(), ggforce::geom_mark_circle(),
ggforce::geom_mark_ellipse(), or ggforce::geom_mark_hull() to annotate
simple feature objects. This function modifies the geometry and sets the stat
to "st_coordinates" to make it easy to use these annotation geoms with simple
feature objects.'><title>Use ggforce to create an annotation layer using simple feature data — layer_marked • maplayer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use ggforce to create an annotation layer using simple feature data — layer_marked"><meta property="og:description" content='Use ggforce::geom_mark_rect(), ggforce::geom_mark_circle(),
ggforce::geom_mark_ellipse(), or ggforce::geom_mark_hull() to annotate
simple feature objects. This function modifies the geometry and sets the stat
to "st_coordinates" to make it easy to use these annotation geoms with simple
feature objects.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">maplayer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/elipousson/maplayer/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Use ggforce to create an annotation layer using simple feature data</h1>
      <small class="dont-index">Source: <a href="https://github.com/elipousson/maplayer/blob/HEAD/R/layer_marked.R" class="external-link"><code>R/layer_marked.R</code></a></small>
      <div class="d-none name"><code>layer_marked.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Use <code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_rect.html" class="external-link">ggforce::geom_mark_rect()</a></code>, <code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_circle.html" class="external-link">ggforce::geom_mark_circle()</a></code>,
<code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_ellipse.html" class="external-link">ggforce::geom_mark_ellipse()</a></code>, or <code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_hull.html" class="external-link">ggforce::geom_mark_hull()</a></code> to annotate
simple feature objects. This function modifies the geometry and sets the stat
to "st_coordinates" to make it easy to use these annotation geoms with simple
feature objects.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">layer_marked</span><span class="op">(</span>
  <span class="va">data</span>,
  fn <span class="op">=</span> <span class="cn">NULL</span>,
  mapping <span class="op">=</span> <span class="cn">NULL</span>,
  label_col <span class="op">=</span> <span class="cn">NULL</span>,
  desc_col <span class="op">=</span> <span class="cn">NULL</span>,
  geom <span class="op">=</span> <span class="cn">NULL</span>,
  center <span class="op">=</span> <span class="cn">FALSE</span>,
  font_family <span class="op">=</span> <span class="cn">NULL</span>,
  font_face <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bold"</span>, <span class="st">"plain"</span><span class="op">)</span>,
  font_color <span class="op">=</span> <span class="cn">NULL</span>,
  expand <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">5</span>, <span class="st">"mm"</span><span class="op">)</span>,
  radius <span class="op">=</span> <span class="va">expand</span>,
  drop_shadow <span class="op">=</span> <span class="cn">FALSE</span>,
  x_offset <span class="op">=</span> <span class="fl">5</span>,
  y_offset <span class="op">=</span> <span class="fl">5</span>,
  sigma <span class="op">=</span> <span class="fl">0.5</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A <code>sf</code>, <code>sfc</code>, or <code>bbox</code> object that can be converted with
<a href="https://elipousson.github.io/overedge/reference/as_sf.html" class="external-link">overedge::as_sf</a></p></dd>
<dt>fn</dt>
<dd><p>Function to apply to data before passing to geom, typically a
predicate or filter to define area for annotation. A filter can also be
passed to any of the ggforce functions using the filter aesthetic.
Default: NULL</p></dd>
<dt>mapping</dt>
<dd><p>Aesthetic mapping to pass to geom, Default: NULL</p></dd>
<dt>label_col</dt>
<dd><p>Label column name</p></dd>
<dt>geom</dt>
<dd><p>geom to use for layer ("rect", "circle", "ellipse", or "hull"),
Default: <code>NULL</code></p></dd>
<dt>center</dt>
<dd><p>If <code>FALSE</code>, use <a href="https://elipousson.github.io/overedge/reference/st_cast_ext.html" class="external-link">overedge::st_cast_ext</a> MULTIPOLYGON and
POLYGON data to POINT; If <code>TRUE</code>, use <a href="https://elipousson.github.io/overedge/reference/st_misc.html" class="external-link">overedge::st_center</a> use centroid as
the feature geometry. Defaults to FALSE.</p></dd>
<dt>font_family, font_face, font_color</dt>
<dd><p>Parameters passed to label.family,
label.fontface, and label.colour. If <code>NULL</code>, values are set to match
<a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">ggplot2::geom_label</a> defaults. Defaults to <code>NULL</code>.</p></dd>
<dt>expand</dt>
<dd><p>A numeric or unit vector of length one, specifying the
expansion amount. Negative values will result in contraction instead. If the
value is given as a numeric it will be understood as a proportion of the
plot area width.</p></dd>
<dt>radius</dt>
<dd><p>As <code>expand</code> but specifying the corner radius.</p></dd>
<dt>drop_shadow</dt>
<dd><p>If <code>TRUE</code>, use <a href="https://ggfx.data-imaginist.com/reference/with_shadow.html" class="external-link">ggfx::with_shadow</a> to add a drop shadow to the label layer. Defaults to <code>FALSE</code>.</p></dd>
<dt>x_offset, y_offset, sigma</dt>
<dd><p>Parameters passed to ggfx::with_shadow if <code>drop_shadow = TRUE</code>.</p></dd>
<dt>...</dt>
<dd><p>Additional parameters passed to <code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_rect.html" class="external-link">ggforce::geom_mark_rect()</a></code>,
<code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_circle.html" class="external-link">ggforce::geom_mark_circle()</a></code>, <code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_ellipse.html" class="external-link">ggforce::geom_mark_ellipse()</a></code>, or
<code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_hull.html" class="external-link">ggforce::geom_mark_hull()</a></code> on to <code><a href="https://ggplot2.tidyverse.org/reference/layer.html" class="external-link">ggplot2::layer()</a></code></p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="geometry-conversion-for-multipolygon-or-polygon-data">Geometry conversion for MULTIPOLYGON or POLYGON data<a class="anchor" aria-label="anchor" href="#geometry-conversion-for-multipolygon-or-polygon-data"></a></h2>
    


<p>If cast is <code>FALSE</code> and the data geometry type is MULTIPOLYGON or POLYGON, the
annotation uses a centroid for the annotation geometry. If cast is <code>TRUE</code>,
the data is converted to POINT geometry using <code><a href="https://r-spatial.github.io/sf/reference/st_cast.html" class="external-link">sf::st_cast()</a></code> and the
modified geometry passed on to selected geom.</p>
    </div>
    <div class="section level2">
    <h2 id="setting-label-and-description">Setting label and description<a class="anchor" aria-label="anchor" href="#setting-label-and-description"></a></h2>
    


<p>Labels and descriptions can be included in the aesthetic mapping for the
layer consistent with the standard documented approaches for all four
functions.</p>
<p>Labels and descriptions also can be set in two non-standard ways:</p><ul><li><p>Setting label_col and/or or desc_col to character strings with the column
names for labels and/or descriptions</p></li>
<li><p>Setting label_col and/or desc_col with the value of the label/description</p></li>
</ul><p>If the first approach is used, label_col and desc_col can also can be created
or modified by a function provided to the fn parameter. Otherwise, the
columns must be present in the data to work. If the second approach is used,
the length and order of vector provided to label_col and/or desc_col must
match that length and order of the data (after the fn is applied).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_rect.html" class="external-link">ggforce::geom_mark_rect()</a></code></p></li>
<li><p><code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_circle.html" class="external-link">ggforce::geom_mark_circle()</a></code></p></li>
<li><p><code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_ellipse.html" class="external-link">ggforce::geom_mark_ellipse()</a></code></p></li>
<li><p><code><a href="https://ggforce.data-imaginist.com/reference/geom_mark_hull.html" class="external-link">ggforce::geom_mark_hull()</a></code></p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ggplot</span><span class="op">)</span></span>
<span class="r-in">  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/elipousson/overedge" class="external-link">overedge</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">    <span class="fu"><a href="https://elipousson.github.io/overedge/reference/layer_location_data.html" class="external-link">layer_location_data</a></span><span class="op">(</span></span>
<span class="r-in">      data <span class="op">=</span> <span class="st">"neighborhoods"</span>,</span>
<span class="r-in">      package <span class="op">=</span> <span class="st">"mapbaltimore"</span></span>
<span class="r-in">    <span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">    <span class="fu">layer_marked</span><span class="op">(</span></span>
<span class="r-in">      data <span class="op">=</span> <span class="fu"><a href="https://elipousson.github.io/overedge/reference/get_location.html" class="external-link">get_location</a></span><span class="op">(</span></span>
<span class="r-in">        type <span class="op">=</span> <span class="st">"council district"</span>,</span>
<span class="r-in">        name <span class="op">=</span> <span class="st">"District 12"</span>,</span>
<span class="r-in">        package <span class="op">=</span> <span class="st">"mapbaltimore"</span></span>
<span class="r-in">      <span class="op">)</span>,</span>
<span class="r-in">      geom <span class="op">=</span> <span class="st">"hull"</span>,</span>
<span class="r-in">      color <span class="op">=</span> <span class="st">"red"</span>,</span>
<span class="r-in">      size <span class="op">=</span> <span class="fl">1.5</span></span>
<span class="r-in">    <span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Eli Pousson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

