<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Create a circle or square that can be used as a frame around a simple feature
object using fixed aesthetics for fill, color, size, and linetype. This
function is helpful for the background of an inset map intended for use with
layer_inset."><title>Create a frame layer around a simple feature object — layer_frame • maplayer</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a frame layer around a simple feature object — layer_frame"><meta property="og:description" content="Create a circle or square that can be used as a frame around a simple feature
object using fixed aesthetics for fill, color, size, and linetype. This
function is helpful for the background of an inset map intended for use with
layer_inset."><meta property="og:image" content="https://elipousson.github.io/maplayer/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">maplayer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/elipousson/maplayer/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a frame layer around a simple feature object</h1>
      <small class="dont-index">Source: <a href="https://github.com/elipousson/maplayer/blob/HEAD/R/layer_frame.R" class="external-link"><code>R/layer_frame.R</code></a></small>
      <div class="d-none name"><code>layer_frame.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a circle or square that can be used as a frame around a simple feature
object using fixed aesthetics for fill, color, size, and linetype. This
function is helpful for the background of an inset map intended for use with
<a href="layer_inset.html">layer_inset</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">layer_frame</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  diag_ratio <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"meter"</span>,</span>
<span>  asp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  style <span class="op">=</span> <span class="st">"circle"</span>,</span>
<span>  scale <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  rotate <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  inscribed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  linetype <span class="op">=</span> <span class="st">"solid"</span>,</span>
<span>  fill <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  neatline <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  expand <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  basemap <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  union <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  by_feature <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">make_frame</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  dist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  diag_ratio <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"meter"</span>,</span>
<span>  asp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  style <span class="op">=</span> <span class="st">"circle"</span>,</span>
<span>  scale <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  rotate <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  inscribed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dTolerance <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  union <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  by_feature <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data, x</dt>
<dd><p>A <code>sf</code>, <code>sfc</code>, or <code>bbox</code> object to create the frame around.</p></dd>


<dt>dist</dt>
<dd><p>buffer distance in units. Optional.</p></dd>


<dt>diag_ratio</dt>
<dd><p>ratio of diagonal distance of area's bounding box used as
buffer distance. e.g. if the diagonal distance is 3000 meters and the
"diag_ratio = 0.1"  a 300 meter will be used. Ignored when <code>dist</code> is
provided.</p></dd>


<dt>unit</dt>
<dd><p>Units for buffer. Supported options include "meter", "foot",
"kilometer", and "mile", "nautical mile" Common abbreviations (e.g. "km"
instead of "kilometer") are also supported. Distance in units is converted
to units matching GDAL units for x; defaults to "meter"</p></dd>


<dt>asp</dt>
<dd><p>Aspect ratio of width to height as a numeric value (e.g. 0.33) or
character (e.g. "1:3"). If numeric, <code><a href="https://elipousson.github.io/sfext/reference/get_asp.html" class="external-link">get_asp()</a></code> returns the same value
without modification.</p></dd>


<dt>style</dt>
<dd><p>Style of framing shape to add, "circle", "square", "rect",
"buffer", or "none". If style is "buffer", the asp parameter is ignored. If
style is "none", the dist, diag_ratio, and asp parameters are ignored and
the input data is used as the frame.</p></dd>


<dt>scale</dt>
<dd><p>numeric; scale factor, Default: 1</p></dd>


<dt>rotate</dt>
<dd><p>numeric; degrees to rotate (-360 to 360), Default: 0</p></dd>


<dt>inscribed</dt>
<dd><p>If <code>TRUE</code>, make circle, square, or donut inscribed within x, if
<code>FALSE</code>, make it circumscribed. Use</p></dd>


<dt>fill, color, size, linetype</dt>
<dd><p>Fixed aesthetics for frame, passed to
<a href="layer_location_data.html">layer_location_data</a>.</p></dd>


<dt>neatline</dt>
<dd><p>If <code>TRUE</code>, return a list of layers that includes a
<a href="layer_neatline.html">layer_neatline</a></p></dd>


<dt>expand</dt>
<dd><p>If <code>TRUE</code>, the default, adds a small expansion factor to
the limits to ensure that data and axes don't overlap. If <code>FALSE</code>,
limits are taken exactly from the data or <code>xlim</code>/<code>ylim</code>.</p></dd>


<dt>basemap</dt>
<dd><p>Either a logical vector or ggplot object.</p>
<p>If <strong>logical</strong> and <code>TRUE</code>, add x to <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot()</a></code>. If <code>FALSE</code>, return x
as is.</p>
<p>If a <strong>ggplot</strong>, add x to basemap object.</p>
<p>If a <strong>ggproto</strong> object (or list that contains a <strong>ggproto</strong> object), add x
and basemap object to <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot()</a></code>.</p></dd>


<dt>union</dt>
<dd><p>If <code>TRUE</code>, pass data to <a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">sf::st_union</a> before buffering and
creating frame; defaults to <code>TRUE</code>.</p></dd>


<dt>by_feature</dt>
<dd><p>If <code>TRUE</code>, create a frame around each feature. If <code>FALSE</code>
(default), union the provided features before creating a frame.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="layer_location_data.html">layer_location_data</a></code></p><dl><dt><code>layer_fn</code></dt>
<dd><p>ggplot2 geom or custom function using lambda syntax. Use for
passing custom mapping functions to layer_location_data beyond the
supported geom options.</p></dd>

    <dt><code>label_col</code></dt>
<dd><p>Column name or id for a column with the text or labels to
pass to any text geom.</p></dd>

    <dt><code>smooth_params</code></dt>
<dd><p>Optional. Logical or a list of parameters passed to
<code><a href="https://strimas.com/smoothr/reference/smooth.html" class="external-link">smoothr::smooth()</a></code>. If <code>TRUE</code>, apply <code><a href="https://strimas.com/smoothr/reference/smooth.html" class="external-link">smoothr::smooth()</a></code> to location data
using default parameters. smooth_params is ignored if data is <code>NULL</code>
(inheriting data from ggplot).</p></dd>

    <dt><code>shadow_params</code></dt>
<dd><p>Optional. Logical or a list of parameters passed to
<code><a href="https://ggfx.data-imaginist.com/reference/with_shadow.html" class="external-link">ggfx::with_shadow()</a></code>. If <code>TRUE</code>, apply <code><a href="https://ggfx.data-imaginist.com/reference/with_shadow.html" class="external-link">ggfx::with_shadow()</a></code> to the layer
using default parameters. shadow_params is ignored if layer_fn is provided.</p></dd>

    <dt><code>location</code></dt>
<dd><p>sf object. If multiple areas are provided, they are unioned
into a single sf object using <a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">sf::st_union</a></p></dd>

    <dt><code>filetype</code></dt>
<dd><p>File type to use if passing parameters to <a href="https://elipousson.github.io/sfext/reference/read_sf_ext.html" class="external-link">sfext::read_sf_download</a>
or <a href="https://elipousson.github.io/sfext/reference/read_sf_ext.html" class="external-link">sfext::read_sf_pkg</a> (required for extdata and cached data).</p></dd>

    <dt><code>fn</code></dt>
<dd><p>Function to apply to data after filtering by location but before
returning from function.</p></dd>

    <dt><code>crop</code></dt>
<dd><p>If <code>TRUE</code>, x is cropped to y using <code><a href="https://r-spatial.github.io/sf/reference/st_crop.html" class="external-link">sf::st_crop()</a></code>.</p></dd>

    <dt><code>trim</code></dt>
<dd><p>If <code>TRUE</code>, x is trimmed to y with <code><a href="https://elipousson.github.io/sfext/reference/st_erase.html" class="external-link">st_trim()</a></code>.</p></dd>

    <dt><code>crs</code></dt>
<dd><p>Coordinate reference system to return.</p></dd>

    <dt><code>mapping</code></dt>
<dd><p>Set of aesthetic mappings created by <code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code> or
<code><a href="https://ggplot2.tidyverse.org/reference/aes_.html" class="external-link">aes_()</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p></dd>

  
</dl></dd>


<dt>dTolerance</dt>
<dd><p>numeric; tolerance parameter, specified for all or for each
feature geometry. If you run <code>st_simplify</code>, the input data is
specified with long-lat coordinates and <code><a href="https://r-spatial.github.io/sf/reference/s2.html" class="external-link">sf_use_s2()</a></code> returns
<code>TRUE</code>, then the value of <code>dTolerance</code> must be specified in
meters.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The make_frame helper function calls <a href="https://elipousson.github.io/sfext/reference/st_misc.html" class="external-link">sfext::st_circle</a> (if <code>style = "circle"</code>), <a href="https://elipousson.github.io/sfext/reference/st_misc.html" class="external-link">sfext::st_square</a>  (if <code>style = "square"</code>), <a href="https://elipousson.github.io/sfext/reference/st_bbox_ext.html" class="external-link">sfext::st_bbox_ext</a>
(if <code>style = "rect"</code>), or <a href="https://elipousson.github.io/sfext/reference/st_buffer_ext.html" class="external-link">sfext::st_buffer_ext</a> (if <code>style = "none"</code>).</p>
<p>If neatline is <code>TRUE</code>, layer_frame returns a list of two geoms, the second
a <a href="layer_neatline.html">layer_neatline</a> layer created using the frame object as the data and the
parameters <code>bgcolor = "none"</code> and <code>color = "none"</code>. asp is set to 1 if style is
"circle" or "square" or the provided asp value otherwise.</p>
<p>Additional parameters passed through ... can include additional fixed
aesthetics (e.g. alpha). If using the fn parameter, the function is applied
to the frame simple feature object created by make_frame (not to the
original input data).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other layer: 
<code><a href="layer_location_data.html">layer_location_data</a>()</code>,
<code><a href="layer_neatline.html">layer_neatline</a>()</code>,
<code><a href="layer_scaled.html">layer_scaled</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu">sfext</span><span class="fu">::</span><span class="fu"><a href="https://elipousson.github.io/sfext/reference/read_sf_ext.html" class="external-link">read_sf_path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"shape/nc.shp"</span>, package <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">raleigh_msa</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">getdata</span><span class="fu">::</span><span class="fu"><a href="https://elipousson.github.io/getdata/reference/get_location.html" class="external-link">get_location</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="va">nc</span>,</span></span>
<span class="r-in"><span>    name_col <span class="op">=</span> <span class="st">"NAME"</span>,</span></span>
<span class="r-in"><span>    name <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Franklin"</span>, <span class="st">"Johnston"</span>, <span class="st">"Wake"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    crs <span class="op">=</span> <span class="fl">3857</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">layer_frame</span><span class="op">(</span></span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="va">raleigh_msa</span>,</span></span>
<span class="r-in"><span>    frame <span class="op">=</span> <span class="st">"circle"</span>,</span></span>
<span class="r-in"><span>    fill <span class="op">=</span> <span class="st">"lightyellow"</span>,</span></span>
<span class="r-in"><span>    inscribed <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="layer_location_data.html">layer_location_data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="va">raleigh_msa</span>,</span></span>
<span class="r-in"><span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">NAME</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    alpha <span class="op">=</span> <span class="fl">0.5</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    fill <span class="op">=</span> <span class="st">"none"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Ignoring unknown parameters: frame</span>
<span class="r-plt img"><img src="layer_frame-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Eli Pousson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

